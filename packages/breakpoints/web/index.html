<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Breakpoint Manager</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Fraunces:wght@600;700&family=Space+Grotesk:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css"
    />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="page">
      <header class="hero">
        <div>
          <div class="eyebrow">Breakpoint Manager</div>
          <h1>Release agents with confidence.</h1>
          <p class="subtitle">
            Review waiting breakpoints, leave feedback, and unblock workflows.
          </p>
        </div>
        <div class="token-panel">
          <label for="token">Human Token</label>
          <input id="token" type="password" placeholder="Bearer token" />
          <button id="save-token">Save</button>
          <p class="hint">Token required for list and feedback endpoints.</p>
        </div>
      </header>

      <section class="controls">
        <div class="field">
          <label for="status">Status</label>
          <select id="status">
            <option value="">Any</option>
            <option value="waiting" selected>Waiting</option>
            <option value="released">Released</option>
            <option value="expired">Expired</option>
            <option value="cancelled">Cancelled</option>
          </select>
        </div>
        <div class="field">
          <label for="tag">Tag</label>
          <input id="tag" type="text" placeholder="e.g. deploy" />
        </div>
        <div class="field">
          <label for="agentId">Agent</label>
          <input id="agentId" type="text" placeholder="agent-123" />
        </div>
        <div class="field">
          <label for="auto-refresh">Auto-refresh</label>
          <select id="auto-refresh">
            <option value="off">Off</option>
            <option value="5">Every 5s</option>
            <option value="10" selected>Every 10s</option>
            <option value="30">Every 30s</option>
          </select>
        </div>
        <div class="field">
          <label for="notify">Desktop alerts</label>
          <select id="notify">
            <option value="off" selected>Off</option>
            <option value="on">On</option>
          </select>
          <div id="notify-status" class="hint"></div>
        </div>
        <button id="refresh">Refresh</button>
      </section>

      <section class="stats">
        <div class="stat-card">
          <div class="stat-label">Waiting</div>
          <div id="stat-waiting" class="stat-value">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Released</div>
          <div id="stat-released" class="stat-value">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Expired</div>
          <div id="stat-expired" class="stat-value">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Cancelled</div>
          <div id="stat-cancelled" class="stat-value">0</div>
        </div>
      </section>

      <main class="layout">
        <section class="list">
          <div class="section-title">Waiting Breakpoints</div>
          <div id="list-message" class="hint"></div>
          <ul id="breakpoint-list"></ul>
        </section>

        <section class="detail">
          <div class="section-title">Details</div>
          <div id="detail-empty">Select a breakpoint to review.</div>
          <div id="detail-view" class="hidden">
            <div class="detail-header">
              <h2 id="detail-title"></h2>
              <span id="detail-status" class="status-pill"></span>
            </div>
            <div class="detail-meta" id="detail-meta"></div>
            <pre id="detail-payload"></pre>

            <div class="context">
              <h3>Context Files</h3>
              <div id="context-empty" class="hint">No context files provided.</div>
              <div class="context-layout">
                <ul id="context-list"></ul>
                <div class="context-viewer">
                  <div id="context-meta" class="hint"></div>
                  <div id="context-render" class="context-render"></div>
                  <pre id="context-code" class="hidden"><code id="context-code-inner"></code></pre>
                </div>
              </div>
            </div>

            <div class="feedback">
              <h3>Feedback</h3>
              <ul id="feedback-list"></ul>
              <textarea id="feedback-text" rows="4" placeholder="Leave a comment..."></textarea>
              <div class="feedback-actions">
                <input id="feedback-author" type="text" placeholder="Your name" />
                <button id="send-feedback">Comment</button>
                <button id="release">Release</button>
              </div>
              <div id="feedback-message" class="hint"></div>
            </div>
          </div>
        </section>
      </main>

      <section class="extensions">
        <div class="section-title">Extensions</div>
        <div id="extensions-message" class="hint"></div>
        <div id="extensions-list"></div>
      </section>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/12.0.2/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="./app.js"></script>
  </body>
</html>
